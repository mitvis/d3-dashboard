(this["webpackJsonpreact-d3-dashboard"]=this["webpackJsonpreact-d3-dashboard"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),s=n.n(c),r=n(7),i=n.n(r),o=(n(15),n(2)),l=n(3),h=n(5),d=n(4),u=n(9),b=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var c=arguments.length,s=new Array(c),r=0;r<c;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).onChange=function(t){e.props.onCheckboxChange(t.target.name,t.target.checked)},e.createCheckboxes=function(t,n){return Object.entries(t).map((function(t){var c=Object(u.a)(t,2),s=c[0],r=c[1];return Object(a.jsxs)("div",{className:"filter-checkbox",style:{backgroundColor:r},children:[Object(a.jsx)("label",{htmlFor:s,children:s}),Object(a.jsx)("input",{type:"checkbox",name:s,defaultChecked:n.has(s),onChange:e.onChange})]},s)}))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"filter-checkboxes",children:[Object(a.jsx)("div",{className:"filter-checkboxes-label",children:"Communities:"}),this.createCheckboxes(this.props.communityColors,this.props.selectedCommunities)]})}}]),n}(s.a.Component),m=n(8),p=window.d3,f=1e3,v={"k20-2":"line charts","k20-4":"line charts","k20-13":"area charts","k20-16":"bar charts","k20-9":"bar charts","k40-3":"pie charts","k20-0":"tables","k20-7":"tables","k20-15":"maps","k20-11":"dashboards","k20-1":"images w/people"},g={"line charts":"#1b9e77","area charts":"#d95f02","bar charts":"#7570b3","pie charts":"#e7298a",tables:"#66a61e",maps:"#e6ab02",dashboards:"#a6761d","images w/people":"#777777",null:"#e1e1e1"},x=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={context:null,points:null,t:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.width,n=this.props.height;this.debounceSaveState=Object(m.a)(250,(function(t,n,a){e.setState({context:t,points:n,t:a})}));var a=2*Math.PI;window.draw=function(t,n,c){if(e.props.selectedCommunities){var s=e.props.selectedCommunities;n=n.filter((function(e){return s.has(e.g_d5_c10)}))}n.length>f&&(n=n.slice(),p.quickselect(n,f,0,n.length-1,(function(e,t){return t.engagement_count-e.engagement_count})),n.splice(f,n.length-1)),t.globalAlpha=.5,t.fillStyle="black";for(var r=1/c.k*3,i=0;i<n.length;i++){var o=n[i],l=Math.log(o.engagement_count)*r;t.beginPath();var h="k20-".concat(Number(o.k20).toFixed(0)),d=v[h]||"null";t.fillStyle=g[d],t.arc(o.x,o.y,Math.sqrt(l),0,a),t.fill()}};for(var c,s,r=p.quadtree().extent([[-1,-1],[t+1,n+1]]).x((function(e){return e.x})).y((function(e){return e.y})),i=this.props.data,o=0;o<i.length;o++){var l=(c=i[o].x,s=i[o].y,{x:40*c+t/2,y:40*s+n/2});i[o].x=l.x,i[o].y=l.y}var h=p.select("#chart").append("canvas").attr("id","canvas").attr("width",t).attr("height",n),d=(h=h.node()).getContext("2d");r.addAll(i),window.draw(d,i,p.zoomIdentity),this.debounceSaveState(d,i,p.zoomIdentity),p.select(h).call((function(a){var c=a.node().getContext("2d"),s=p.zoom().on("zoom",(function(){var a=p.event.transform;c.save(),c.clearRect(0,0,t,n);var s=[a.invert([0,0]),a.invert([t,n])];c.translate(a.x,a.y),c.scale(a.k,a.k);var i=function(e,t,n,a,c){var s=[];return e.visit((function(e,r,i,o,l){if(!e.length)do{var h=e.data;h.scanned=!0,h.selected=h.x>=t&&h.x<a&&h.y>=n&&h.y<c,h.selected&&s.push(h)}while(e=e.next);return r>=a||i>=c||o<t||l<n})),s}(r,s[0][0],s[0][1],s[1][0],s[1][1]);window.draw(c,i,a),e.debounceSaveState(c,i,a),c.restore()}));a.call(s)}))}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=this.state.context,n=this.state.points,a=this.state.t;t.save(),t.clearRect(0,0,this.props.width,this.props.height),t.translate(a.x,a.y),t.scale(a.k,a.k),window.draw(t,n,a),t.restore()}}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"tweet-scatterplot-legend",children:Object(a.jsx)("svg",{height:200,children:Object.keys(g).map((function(e,t){return Object(a.jsxs)("g",{children:[Object(a.jsx)("circle",{cx:10,cy:20*t+10,r:7,fill:g[e]}),Object(a.jsx)("text",{x:20,y:20*t+15,fill:g[e],children:"null"===e?"other":e})]},e)}))})})}}]),n}(s.a.Component),j=window.d3,k=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={data:null,communityColors:null,selectedCommunities:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;j.csv("https://raw.githubusercontent.com/AnnaAD/d3-dashboard/master/tweet_data.csv").then((function(t){for(var n={},a=[1,4,0,6,2,7,13,5,12,15,-1],c=["#4e79a7","#e15759","#f28e2c","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab","#eeeeee"],s=0;s<a.length;s++)n[a[s]]=c[s];for(var r={},i=0;i<t.length;i++){var o=t[i].g_d5_c10;t[i].g_d5_c10||0===t[i].g_d5_c10||(o=-1),o=Number(o).toFixed(0),t[i].g_d5_c10=o,r[o]=r[o]?r[o]+1:1}console.log(r),e.setState({data:t,communityColors:n,selectedCommunities:new Set(a.map((function(e){return String(e)})))})}))}},{key:"onCheckboxChange",value:function(e,t){var n=this.state.selectedCommunities;t?n.add(e):n.delete(e),this.setState({selectedCommunities:n})}},{key:"render",value:function(){var e=this;return this.state.data?Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(b,{communityColors:this.state.communityColors,selectedCommunities:this.state.selectedCommunities,onCheckboxChange:function(t,n){return e.onCheckboxChange(t,n)}}),Object(a.jsx)(x,{width:window.innerWidth/2,height:window.innerHeight,data:this.state.data,communityColors:this.state.communityColors,selectedCommunities:this.state.selectedCommunities})]}):null}}]),n}(s.a.Component);i.a.render(Object(a.jsxs)(s.a.StrictMode,{children:[Object(a.jsx)("div",{id:"chart"}),Object(a.jsx)(k,{})]}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.3f85145d.chunk.js.map